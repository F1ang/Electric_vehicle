/******************************************************************************
 *@brief  电机控制运算常量定义
 *@author By Spotted Owl
 *@date     2025.10.07
 ******************************************************************************/
#ifndef __MC_MATCH_H
#define __MC_MATCH_H

#include "global_variable.h"

/* sector angle */
#define SIN_MASK 0x0300
#define U0_90    0x0200
#define U90_180  0x0300
#define U180_270 0x0000
#define U270_360 0x0100

/* Exported macro ------------------------------------------------------------*/
/* Exported functions ------------------------------------------------------- */
/* Exported variables ------------------------------------------------------- */

#define SIN_COS_TABLE {                                             \
    0x0000, 0x00C9, 0x0192, 0x025B, 0x0324, 0x03ED, 0x04B6, 0x057F, \
    0x0648, 0x0711, 0x07D9, 0x08A2, 0x096B, 0x0A33, 0x0AFB, 0x0BC4, \
    0x0C8C, 0x0D54, 0x0E1C, 0x0EE4, 0x0FAB, 0x1073, 0x113A, 0x1201, \
    0x12C8, 0x138F, 0x1455, 0x151C, 0x15E2, 0x16A8, 0x176E, 0x1833, \
    0x18F9, 0x19BE, 0x1A83, 0x1B47, 0x1C0C, 0x1CD0, 0x1D93, 0x1E57, \
    0x1F1A, 0x1FDD, 0x209F, 0x2162, 0x2224, 0x22E5, 0x23A7, 0x2467, \
    0x2528, 0x25E8, 0x26A8, 0x2768, 0x2827, 0x28E5, 0x29A4, 0x2A62, \
    0x2B1F, 0x2BDC, 0x2C99, 0x2D55, 0x2E11, 0x2ECC, 0x2F87, 0x3042, \
    0x30FC, 0x31B5, 0x326E, 0x3327, 0x33DF, 0x3497, 0x354E, 0x3604, \
    0x36BA, 0x3770, 0x3825, 0x38D9, 0x398D, 0x3A40, 0x3AF3, 0x3BA5, \
    0x3C57, 0x3D08, 0x3DB8, 0x3E68, 0x3F17, 0x3FC6, 0x4074, 0x4121, \
    0x41CE, 0x427A, 0x4326, 0x43D1, 0x447B, 0x4524, 0x45CD, 0x4675, \
    0x471D, 0x47C4, 0x486A, 0x490F, 0x49B4, 0x4A58, 0x4AFB, 0x4B9E, \
    0x4C40, 0x4CE1, 0x4D81, 0x4E21, 0x4EC0, 0x4F5E, 0x4FFB, 0x5098, \
    0x5134, 0x51CF, 0x5269, 0x5303, 0x539B, 0x5433, 0x54CA, 0x5560, \
    0x55F6, 0x568A, 0x571E, 0x57B1, 0x5843, 0x58D4, 0x5964, 0x59F4, \
    0x5A82, 0x5B10, 0x5B9D, 0x5C29, 0x5CB4, 0x5D3E, 0x5DC8, 0x5E50, \
    0x5ED7, 0x5F5E, 0x5FE4, 0x6068, 0x60EC, 0x616F, 0x61F1, 0x6272, \
    0x62F2, 0x6371, 0x63EF, 0x646C, 0x64E9, 0x6564, 0x65DE, 0x6657, \
    0x66D0, 0x6747, 0x67BD, 0x6832, 0x68A7, 0x691A, 0x698C, 0x69FD, \
    0x6A6E, 0x6ADD, 0x6B4B, 0x6BB8, 0x6C24, 0x6C8F, 0x6CF9, 0x6D62, \
    0x6DCA, 0x6E31, 0x6E97, 0x6EFB, 0x6F5F, 0x6FC2, 0x7023, 0x7083, \
    0x70E3, 0x7141, 0x719E, 0x71FA, 0x7255, 0x72AF, 0x7308, 0x735F, \
    0x73B6, 0x740B, 0x7460, 0x74B3, 0x7505, 0x7556, 0x75A6, 0x75F4, \
    0x7642, 0x768E, 0x76D9, 0x7723, 0x776C, 0x77B4, 0x77FB, 0x7840, \
    0x7885, 0x78C8, 0x790A, 0x794A, 0x798A, 0x79C9, 0x7A06, 0x7A42, \
    0x7A7D, 0x7AB7, 0x7AEF, 0x7B27, 0x7B5D, 0x7B92, 0x7BC6, 0x7BF9, \
    0x7C2A, 0x7C5A, 0x7C89, 0x7CB7, 0x7CE4, 0x7D0F, 0x7D3A, 0x7D63, \
    0x7D8A, 0x7DB1, 0x7DD6, 0x7DFB, 0x7E1E, 0x7E3F, 0x7E60, 0x7E7F, \
    0x7E9D, 0x7EBA, 0x7ED6, 0x7EF0, 0x7F0A, 0x7F22, 0x7F38, 0x7F4E, \
    0x7F62, 0x7F75, 0x7F87, 0x7F98, 0x7FA7, 0x7FB5, 0x7FC2, 0x7FCE, \
    0x7FD9, 0x7FE2, 0x7FEA, 0x7FF1, 0x7FF6, 0x7FFA, 0x7FFE, 0x7FFF  \
}

#define SQRTAB1 {                                           \
    0, 4096, 5793, 7094, 8192, 9159, 10033, 10837,          \
    11585, 12288, 12953, 13585, 14189, 14768, 15326, 15864, \
    16384, 16888, 17378, 17854, 18318, 18770, 19212, 19644, \
    20066, 20480, 20886, 21283, 21674, 22058, 22435, 22806, \
    23170, 23530, 23884, 24232, 24576, 24915, 25249, 25580, \
    25905, 26227, 26545, 26859, 27170, 27477, 27780, 28081, \
    28378, 28672, 28963, 29251, 29537, 29819, 30099, 30377, \
    30652, 30924, 31194, 31462, 31727, 31991, 32252, 32511, \
    32768, 33023, 33276, 33527, 33776, 34024, 34270, 34514, \
    34756, 34996, 35235, 35472, 35708, 35942, 36175, 36406, \
    36636, 36864, 37091, 37316, 37540, 37763, 37985, 38205, \
    38424, 38642, 38858, 39073, 39287, 39500, 39712, 39923, \
    40132, 40341, 40548, 40755, 40960, 41164, 41368, 41570, \
    41771, 41972, 42171, 42369, 42567, 42763, 42959, 43154, \
    43348, 43541, 43733, 43925, 44115, 44305, 44494, 44682, \
    44869, 45056, 45242, 45427, 45611, 45795, 45977, 46160, \
    46341, 46522, 46702, 46881, 47059, 47237, 47415, 47591, \
    47767, 47942, 48117, 48291, 48465, 48637, 48809, 48981, \
    49152, 49322, 49492, 49661, 49830, 49998, 50166, 50332, \
    50499, 50665, 50830, 50995, 51159, 51323, 51486, 51649, \
    51811, 51972, 52134, 52294, 52454, 52614, 52773, 52932, \
    53090, 53248, 53405, 53562, 53719, 53874, 54030, 54185, \
    54340, 54494, 54647, 54801, 54954, 55106, 55258, 55410, \
    55561, 55712, 55862, 56012, 56162, 56311, 56459, 56608, \
    56756, 56903, 57051, 57198, 57344, 57490, 57636, 57781, \
    57926, 58071, 58215, 58359, 58503, 58646, 58789, 58931, \
    59073, 59215, 59357, 59498, 59639, 59779, 59919, 60059, \
    60199, 60338, 60477, 60615, 60753, 60891, 61029, 61166, \
    61303, 61440, 61576, 61712, 61848, 61984, 62119, 62254, \
    62388, 62523, 62657, 62790, 62924, 63057, 63190, 63323, \
    63455, 63587, 63719, 63850, 63982, 64113, 64243, 64374, \
    64504, 64634, 64763, 64893, 65022, 65151, 65279, 65408  \
}

#define SQRTAB2 {                                           \
    32768, 32768, 32769, 32770, 32772, 32774, 32777, 32780, \
    32784, 32788, 32793, 32798, 32804, 32810, 32817, 32824, \
    32832, 32840, 32849, 32858, 32868, 32878, 32889, 32900, \
    32912, 32924, 32937, 32950, 32963, 32978, 32992, 33007, \
    33023, 33039, 33056, 33073, 33090, 33108, 33127, 33146, \
    33166, 33186, 33206, 33227, 33248, 33270, 33293, 33316, \
    33339, 33363, 33387, 33412, 33437, 33463, 33489, 33516, \
    33543, 33570, 33598, 33627, 33656, 33685, 33715, 33746, \
    33776, 33808, 33839, 33872, 33904, 33937, 33971, 34005, \
    34039, 34074, 34110, 34145, 34182, 34218, 34255, 34293, \
    34331, 34369, 34408, 34447, 34487, 34527, 34568, 34609, \
    34650, 34692, 34734, 34777, 34820, 34863, 34907, 34952, \
    34996, 35041, 35087, 35133, 35179, 35226, 35273, 35321, \
    35369, 35417, 35466, 35515, 35565, 35615, 35665, 35716, \
    35767, 35818, 35870, 35922, 35975, 36028, 36081, 36135, \
    36189, 36244, 36299, 36354, 36410, 36466, 36522, 36579, \
    36636, 36693, 36751, 36809, 36868, 36926, 36986, 37045, \
    37105, 37165, 37226, 37287, 37348, 37410, 37471, 37534, \
    37596, 37659, 37722, 37786, 37850, 37914, 37979, 38044, \
    38109, 38174, 38240, 38306, 38373, 38439, 38507, 38574, \
    38642, 38710, 38778, 38846, 38915, 38985, 39054, 39124, \
    39194, 39264, 39335, 39406, 39477, 39549, 39620, 39693, \
    39765, 39838, 39911, 39984, 40057, 40131, 40205, 40279, \
    40354, 40429, 40504, 40579, 40655, 40731, 40807, 40883, \
    40960, 41037, 41114, 41192, 41269, 41347, 41425, 41504, \
    41582, 41661, 41741, 41820, 41900, 41980, 42060, 42140, \
    42221, 42301, 42382, 42464, 42545, 42627, 42709, 42791, \
    42874, 42956, 43039, 43122, 43206, 43289, 43373, 43457, \
    43541, 43625, 43710, 43795, 43880, 43965, 44051, 44136, \
    44222, 44308, 44394, 44481, 44568, 44654, 44741, 44829, \
    44916, 45004, 45092, 45180, 45268, 45356, 45445, 45534, \
    45623, 45712, 45801, 45891, 45980, 46070, 46160, 46251, \
    46341, 46432                                            \
}

#define ATANTAB1 {                                                                                  \
    0, 41, 81, 122, 163, 204, 244, 285, 326, 367, 407, 448, 489, 529, 570, 610,                     \
    651, 692, 732, 773, 813, 854, 894, 935, 975, 1015, 1056, 1096, 1136, 1177, 1217, 1257,          \
    1297, 1337, 1377, 1417, 1457, 1497, 1537, 1577, 1617, 1656, 1696, 1736, 1775, 1815, 1854, 1894, \
    1933, 1973, 2012, 2051, 2090, 2129, 2168, 2207, 2246, 2285, 2324, 2363, 2401, 2440, 2478, 2517, \
    2555, 2594, 2632, 2670, 2708, 2746, 2784, 2822, 2860, 2897, 2935, 2973, 3010, 3047, 3085, 3122, \
    3159, 3196, 3233, 3270, 3307, 3344, 3380, 3417, 3453, 3490, 3526, 3562, 3599, 3635, 3670, 3706, \
    3742, 3778, 3813, 3849, 3884, 3920, 3955, 3990, 4025, 4060, 4095, 4129, 4164, 4199, 4233, 4267, \
    4302, 4336, 4370, 4404, 4438, 4471, 4505, 4539, 4572, 4605, 4639, 4672, 4705, 4738, 4771, 4803, \
    4836, 4869, 4901, 4933, 4966, 4998, 5030, 5062, 5094, 5125, 5157, 5188, 5220, 5251, 5282, 5313, \
    5344, 5375, 5406, 5437, 5467, 5498, 5528, 5559, 5589, 5619, 5649, 5679, 5708, 5738, 5768, 5797, \
    5826, 5856, 5885, 5914, 5943, 5972, 6000, 6029, 6058, 6086, 6114, 6142, 6171, 6199, 6227, 6254, \
    6282, 6310, 6337, 6365, 6392, 6419, 6446, 6473, 6500, 6527, 6554, 6580, 6607, 6633, 6660, 6686, \
    6712, 6738, 6764, 6790, 6815, 6841, 6867, 6892, 6917, 6943, 6968, 6993, 7018, 7043, 7068, 7092, \
    7117, 7141, 7166, 7190, 7214, 7238, 7262, 7286, 7310, 7334, 7358, 7381, 7405, 7428, 7451, 7475, \
    7498, 7521, 7544, 7566, 7589, 7612, 7635, 7657, 7679, 7702, 7724, 7746, 7768, 7790, 7812, 7834, \
    7856, 7877, 7899, 7920, 7942, 7963, 7984, 8005, 8026, 8047, 8068, 8089, 8110, 8131, 8151, 8172, \
    8192, 8212, 8233, 8253, 8273, 8293, 8313, 8333, 8352, 8372, 8392, 8411, 8431, 8450, 8470, 8489  \
}

/* 正弦函数 */
typedef struct
{
    s16 hCos;
    s16 hSin;
} TrigValue_Ctrl_t;

/* 斜坡运算 */
typedef struct
{
    s32 wRampIn;
    s32 wRampTmp;
    s32 wRampIncrease;
    s32 wRampDecrease;
    s32 wRampOut;
} STR_RampGen32, *PSTR_RampGen32;

void Trig_Functions(s16 hAngle, TrigValue_Ctrl_t *t_pTrigComponents);
s16 Sqrt_Functions(s16 x, s16 y);
s16 Div_Functions(s32 y, s16 x);
void CopyFromBuffer(u8 *nDestAddr, u8 *pSrcBuff, u16 nSize);
void ramp32GenInit(PSTR_RampGen32 this);
void ramp32GenCalc(PSTR_RampGen32 this);

#endif
